import{i as e,g as n,l as d,u as A,c as P,O as V,F as _,S as Y,C as te,h as u,s as X,e as j,B as se,W as ne}from"./vendor-9d884d62.js";import{z as m,c as Z,v as J}from"./index-ea658198.js";import{B as C}from"./Button-2f123a88.js";import{f as K,w as le,x as re,y as ae,z as ie,A as oe,B as ce,E as de,j as ue,F as ge,G as he,H as pe,T as me,I as F,p as ve,n as fe,i as be,b as _e,R as $e,r as xe,J as Ce,v as ye,K as Te,M as q,N as Se,O as N,Q as we,S as Ee,U as Le,V as W,W as Pe,X as Re,Y as ke}from"./index-8abaf42d.js";const Ie=d('<div class="pb-4 text-lg font-semibold">'),De=d('<div class="flex flex-col p-4">'),Oe=d('<div class="flex flex-col"><form class="flex flex-col gap-2 sm:flex-row"><input name="name" class="input input-bordered w-full sm:flex-1"><div class="flex items-center gap-2"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Fe=d('<div class="py-2">'),Ne=d('<div class="flex flex-col gap-4"><form class="contents"></form><div class="flex flex-wrap items-center gap-2"></div><div class="flex flex-col"><input class="input input-bordered max-w-md"></div><div><input type="number" class="input input-bordered w-full max-w-md"></div><div><input class="toggle" type="checkbox">'),je=d('<div class="form-control w-64 max-w-sm"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),H=d('<div class="flex flex-col"><select class="select select-bordered w-full max-w-xs">'),L=d("<option>"),Ae=d('<div class="grid gap-4"><div><select class="select select-bordered w-full max-w-xs"></select></div><div><select class="select select-bordered w-full max-w-xs"></select></div><div><select class="select select-bordered w-full max-w-xs"></select></div><div></div><div>'),Ge=d('<div class="flex flex-col"><input type="checkbox" class="toggle">'),Ue=d('<option class="flex items-center gap-2">'),Me=d('<div class="flex flex-col gap-4"><kbd class="kbd">'),Qe=m.object({name:m.string(),type:m.string()}),v=t=>(()=>{const c=Ie();return e(c,ne(()=>t.children)),c})(),ze=()=>{const[t]=A(),c=K(),{form:$,isSubmitting:x}=Z({extend:J({schema:Qe}),onSubmit:async l=>{c.get("dns/query",{searchParams:{name:l.name,type:l.type}}).json().then(({Answer:r})=>T((r==null?void 0:r.map(({data:a})=>a))||[]))}}),[y,T]=P([]);return(()=>{const l=Oe(),r=l.firstChild,a=r.firstChild,o=a.nextSibling;return o.firstChild,V($,r,()=>$),e(o,n(C,{type:"submit",class:"btn-primary",get loading(){return x()},get children(){return t("dnsQuery")}}),null),e(l,n(Y,{get when(){return y().length>0},get children(){const g=De();return e(g,n(_,{get each(){return y()},children:f=>(()=>{const h=Fe();return e(h,f),h})()})),g}}),null),l})()},Be=m.object({port:m.number(),"socks-port":m.number(),"redir-port":m.number(),"tproxy-port":m.number(),"mixed-port":m.number()}),Xe=()=>{const[t]=A(),c=K(),$=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:x,setInitialValues:y,reset:T}=Z({extend:J({schema:Be})});te(async()=>{const s=await c.get("configs").json();y(s),T()});const[l,r]=P(!1),[a,o]=P(!1),[g,f]=P(!1),h=async()=>{r(!0);try{await c.post("configs/geo")}catch{}r(!1)},E=async()=>{o(!0);try{await c.post("upgrade")}catch{}o(!1)},R=async()=>{f(!0);try{await c.post("restart")}catch{}f(!1)};return(()=>{const s=Ne(),i=s.firstChild,b=i.nextSibling,S=b.nextSibling,k=S.firstChild,I=S.nextSibling,D=I.firstChild,G=I.nextSibling,O=G.firstChild;return V(x,i,()=>x),e(i,n(_,{each:$,children:p=>(()=>{const U=je(),M=U.firstChild,ee=M.firstChild,Q=M.nextSibling;return e(ee,()=>p.label),u(w=>{const z=p.key,B=p.label;return z!==w._v$&&X(Q,"name",w._v$=z),B!==w._v$2&&X(Q,"placeholder",w._v$2=B),w},{_v$:void 0,_v$2:void 0}),U})()})),e(b,n(C,{get loading(){return l()},onClick:h,get children(){return t("updateGEODatabases")}}),null),e(b,n(C,{get loading(){return a()},onClick:E,get children(){return t("upgradeCore")}}),null),e(b,n(C,{get loading(){return g()},onClick:R,get children(){return t("restartCore")}}),null),e(S,n(v,{get children(){return t("urlForLatencyTest")}}),k),k.addEventListener("change",p=>le(p.target.value)),e(I,n(v,{get children(){return[j(()=>t("latencyTestTimeoutDuration"))," (",j(()=>t("ms")),")"]}}),D),D.addEventListener("change",p=>re(Number(p.target.value))),e(G,n(v,{get children(){return t("autoCloseConns")}}),O),O.addEventListener("change",p=>ae(p.target.checked)),u(()=>k.value=ie()),u(()=>D.value=oe()),u(()=>O.checked=ce()),s})()},qe=()=>{const[t,{locale:c}]=A(),$=se(),x=()=>{_e(""),$($e.Setup)},T=[{label:"renderInTwoColumns",value:xe,onChange:Ce},{label:"renderRulesAndProviderInTwoColumns",value:ye,onChange:Te},{label:"autoSwitchTheme",value:q,onChange:l=>{Se(l),N()},subChild:()=>n(Y,{get when(){return q()},get children(){return[(()=>{const l=H(),r=l.firstChild;return e(l,n(v,{get children(){return t("favDayTheme")}}),r),r.addEventListener("change",a=>{Le(a.target.value),N()}),e(r,n(_,{each:W,children:a=>(()=>{const o=L();return o.value=a,e(o,a),u(()=>o.selected=Pe()===a),o})()})),l})(),(()=>{const l=H(),r=l.firstChild;return e(l,n(v,{get children(){return t("favNightTheme")}}),r),r.addEventListener("change",a=>{Re(a.target.value),N()}),e(r,n(_,{each:W,children:a=>(()=>{const o=L();return o.value=a,e(o,a),u(()=>o.selected=ke()===a),o})()})),l})()]}})},{label:"useTwemoji",value:we,onChange:Ee}];return(()=>{const l=Ae(),r=l.firstChild,a=r.firstChild,o=r.nextSibling,g=o.firstChild,f=o.nextSibling,h=f.firstChild,E=f.nextSibling,R=E.nextSibling;return e(l,n(_,{each:T,children:s=>[(()=>{const i=Ge(),b=i.firstChild;return e(i,n(v,{get children(){return t(s.label)}}),b),b.addEventListener("change",S=>{s.onChange(S.target.checked)}),u(()=>b.checked=s.value()),i})(),j(()=>{var i;return(i=s.subChild)==null?void 0:i.call(s)})]}),r),e(r,n(v,{get children(){return t("proxiesPreviewType")}}),a),a.addEventListener("change",s=>de(s.target.value)),e(a,n(_,{get each(){return Object.values(ue)},children:s=>(()=>{const i=L();return i.value=s,e(i,()=>t(s)),i})()})),e(o,n(v,{get children(){return t("proxiesSorting")}}),g),g.addEventListener("change",s=>ge(s.target.value)),e(g,n(_,{get each(){return Object.values(he)},children:s=>(()=>{const i=Ue();return i.value=s,e(i,()=>t(s)),i})()})),e(f,n(v,{get children(){return t("tableSize")}}),h),h.addEventListener("change",s=>pe(s.target.value)),e(h,n(_,{get each(){return Object.values(me)},children:s=>(()=>{const i=L();return i.value=s,e(i,()=>t(s)),i})()})),e(E,n(C,{onClick:()=>{const s=c();c(s===F.EN?F.ZH:F.EN)},get children(){return t("switchLanguage")}})),e(R,n(C,{onClick:x,get children(){return t("switchEndpoint")}})),u(()=>a.value=ve()),u(()=>g.value=fe()),u(()=>h.value=be()),l})()},Ze=()=>(()=>{const t=Me(),c=t.firstChild;return e(t,n(ze,{}),c),e(t,n(Xe,{}),c),e(t,n(qe,{}),c),e(c,()=>"1.78.1"),t})();export{Ze as default};
